❯ curl -H "Authorization: Bearer hm945LuZqtC9legpJsIc085ymelM6TTo" \
  "http://localhost:8055/flows"

{"data":[{"id":"06229114-7046-48fd-aca5-779ff5e17655","name":"comments_before_create","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"filter","scope":["items.create"],"collections":["comments"],"return":"validate_payload"},"operation":"6d663a19-c5a8-4476-874d-a5123fa15c21","date_created":"2025-09-20T03:49:25.606Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["3d84affa-e041-4bd7-adf9-976d21531dcd","6d663a19-c5a8-4476-874d-a5123fa15c21"]},{"id":"116018e5-7a7c-4a45-930b-77725a98063a","name":"comments_before_delete","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"filter","scope":["items.delete"],"collections":["comments"],"return":"validate_delete"},"operation":"b7242279-1f26-4119-8f15-080a74af533c","date_created":"2025-09-20T04:16:03.604Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["6b28a91c-c328-42dd-a52a-018275b0e5b5","b7242279-1f26-4119-8f15-080a74af533c"]},{"id":"179cb6d7-b187-4858-a30d-9028ecd80bde","name":"comment_reactions_after_create","icon":null,"color":null,"description":null,"status":"active","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.create"],"collections":["comment_reactions"]},"operation":"a4dd6e43-4cf6-4dd5-b322-911c7de3e6f1","date_created":"2025-09-20T05:19:54.318Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["146839a7-5e9b-4e4e-82a8-8ef59f556d7c","377ff86a-12a0-481f-8ffd-1abcf024feba","6a8efef3-b411-4eda-948d-74fc5849ea02","79d796f3-7fa1-474f-8af3-961aa73f53aa","a4dd6e43-4cf6-4dd5-b322-911c7de3e6f1","ac03026e-67e6-4fd8-9780-e0a990499100","da7f780e-3150-45f9-9312-c880b21c27ad"]},{"id":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","name":"comments_after_create","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.create"],"collections":["comments"]},"operation":"63dba79f-2600-4945-a340-cd9fc9192883","date_created":"2025-09-20T03:54:36.268Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["1847b250-00ef-4d1a-9318-8d501a345993","32e1cd7f-279d-480a-96d3-b8a396ae48ef","50a3e828-7436-4bdd-9f81-e18962cd6b78","63dba79f-2600-4945-a340-cd9fc9192883","711f9413-260f-4433-bea4-2eeab5960dcd","bd5bbdf5-330d-42b7-98d6-89e13b42369d"]},{"id":"4488ea12-f5cd-4f42-9c23-884c82291ece","name":"comments_soft_delete","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.update"],"collections":["comments"]},"operation":"063035e9-7f3e-4efe-aab7-968719424adb","date_created":"2025-09-20T04:25:28.450Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["063035e9-7f3e-4efe-aab7-968719424adb","953d1682-17ec-49f4-a5ff-b5ba938ebe06","f6856b34-c42b-4b63-b45e-75a763eedd20"]},{"id":"52fe58c7-dfd4-439f-9361-0d2d0b54d834","name":"add_user_community_relation","icon":"bolt","color":null,"description":null,"status":"active","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.create"],"collections":["directus_users"]},"operation":"38d29559-49e6-48d3-9a3b-aca850d0a1b0","date_created":"2025-09-10T10:28:56.198Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["38d29559-49e6-48d3-9a3b-aca850d0a1b0"]},{"id":"551592af-47ad-402d-9f70-39b287f6a87c","name":"comment_reactions_before_update","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"filter","scope":["items.update"],"collections":["comment_reactions"],"return":"decide_change"},"operation":"14d17399-f0eb-408b-a87c-fa76462e712d","date_created":"2025-09-20T05:20:50.300Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["14d17399-f0eb-408b-a87c-fa76462e712d","17f7644a-4cd0-4432-96d7-3ade10fd5ad9","1efe71af-c870-40d5-98dc-ab5c39b18c2b","603359fd-41d3-430b-9b23-9a2968686811","b0d102e0-706d-4627-9b80-79b7829ef8c2","eb98d822-7e9f-4d9e-8a6c-e29b50fa325e"]},{"id":"62d41de4-0726-480d-b431-cd80ffc83173","name":"comments_after_delete","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.delete"],"collections":["comments"]},"operation":"8a88579a-f7a1-4be9-b561-05fada055ba0","date_created":"2025-09-20T04:19:13.241Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["8a88579a-f7a1-4be9-b561-05fada055ba0","8e0b330a-1f6e-4d58-bf39-09f2c66eeed8","c2c19a27-4423-466f-aea4-c61b4ed53def","f3970d02-3c33-4b58-9b92-f068b358ae2d","fa1944d2-6ab9-42bb-a736-68399cfabbc5"]},{"id":"6e12cbb7-ef3b-403b-a2d9-8c563dfc9d5f","name":"comment_reactions_before_create","icon":null,"color":null,"description":null,"status":"active","trigger":"event","accountability":"all","options":{"type":"filter","scope":["items.create"],"collections":["comment_reactions"],"return":"return_payload"},"operation":"d105e039-66d7-4831-bdcb-da4ec05462f0","date_created":"2025-09-20T05:18:57.393Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["0eb6c8a7-1a7e-4a2a-b375-613eb86c86e8","2ab546c6-420f-4508-a550-31d49d3da13d","2d649fab-6d62-4fb8-a00f-b2156e1f1617","4333d11a-7724-4bb6-938c-405fa1dbcd0b","459757b3-465f-4c85-a894-42409ba8748c","5284d95e-246a-447a-8112-7fca59ec10b1","6b1c64f7-996e-4269-b66e-24976b028569","72e5328e-7402-40b8-a943-ae1f01c526f3","8610063f-b77b-4c85-a29c-e3c50432a6f9","bfec7855-6050-444b-bb35-9a260ec4174d","cbdfed8e-3ac0-4971-b704-2761fbfeca97","d105e039-66d7-4831-bdcb-da4ec05462f0","e0337366-c539-442a-ab6c-3e86cacc5bf9","f3f286e7-3b30-400c-b374-34d395fb081b","f4b259b3-41f1-4f7f-b9f8-0c9b2685628c"]},{"id":"c7593224-8266-4041-9267-0656d1f98e24","name":"comment_reactions_after_delete","icon":null,"color":null,"description":null,"status":"active","trigger":"event","accountability":"all","options":{"type":"action","scope":["items.delete"],"collections":["comment_reactions"]},"operation":"acae2570-e06c-40ab-82aa-583dddf2434a","date_created":"2025-09-20T05:22:14.686Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["6d682aa0-dfca-4b73-8e80-d7666f4ea8db","930817f3-83ff-4771-ad59-9b6ef60f2b88","acae2570-e06c-40ab-82aa-583dddf2434a","fb5d60cf-8785-47d5-9aee-e36c6239a6b3"]},{"id":"dfa7611c-3377-47de-bd11-7d9e5b143f59","name":"comment_reactions_before_create_debug","icon":null,"color":null,"description":null,"status":"inactive","trigger":"event","accountability":"all","options":{"type":"filter","scope":["items.create"],"collections":["comment_reactions"],"return":"$all"},"operation":"9c6d62d9-8700-4a7d-8f23-47aebf71050f","date_created":"2025-09-20T11:27:41.332Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43","operations":["539f7a35-e105-4d04-aaf6-26775a88c57b","8db2f91a-6f35-4e65-acbd-b13e791c0599","9c6d62d9-8700-4a7d-8f23-47aebf71050f","bd724331-8121-48a7-81fc-d7766403ab7c"]}]}% 


❯ curl -H "Authorization: Bearer hm945LuZqtC9legpJsIc085ymelM6TTo" \
  "http://localhost:8055/collections/comments"

{"data":{"collection":"comments","meta":{"collection":"comments","icon":"chat","note":"全局评论","display_template":null,"hidden":false,"singleton":false,"translations":null,"archive_field":null,"archive_app_filter":true,"archive_value":null,"unarchive_value":null,"sort_field":null,"accountability":"all","color":null,"item_duplication_fields":null,"sort":null,"group":null,"collapse":"open","preview_url":null,"versioning":false},"schema":{"schema":"public","name":"comments","comment":null}}}%   



❯ curl -H "Authorization: Bearer hm945LuZqtC9legpJsIc085ymelM6TTo" \
>   "http://localhost:8055/fields/comments"
{"data":[{"collection":"comments","field":"id","type":"uuid","schema":{"name":"id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":false,"is_unique":true,"is_indexed":false,"is_primary_key":true,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":41,"collection":"comments","field":"id","special":["uuid"],"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":true,"sort":1,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"author_id","type":"uuid","schema":{"name":"author_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":"public","foreign_key_table":"directus_users","foreign_key_column":"id","comment":null},"meta":{"id":72,"collection":"comments","field":"author_id","special":["m2o"],"interface":"select-dropdown-m2o","options":{"template":"{{last_name}}{{first_name}}"},"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":5,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"content_id","type":"uuid","schema":{"name":"content_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":"public","foreign_key_table":"contents","foreign_key_column":"id","comment":null},"meta":{"id":73,"collection":"comments","field":"content_id","special":["m2o"],"interface":"select-dropdown-m2o","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":6,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"parent_comment_id","type":"uuid","schema":{"name":"parent_comment_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":"public","foreign_key_table":"comments","foreign_key_column":"id","comment":null},"meta":{"id":93,"collection":"comments","field":"parent_comment_id","special":["m2o"],"interface":"select-dropdown-m2o","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":7,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"target_id","type":"uuid","schema":{"name":"target_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":103,"collection":"comments","field":"target_id","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":10,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"parent_id","type":"uuid","schema":{"name":"parent_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":104,"collection":"comments","field":"parent_id","special":null,"interface":"select-dropdown-m2o","options":{"template":"{{body}}"},"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":11,"width":"full","translations":null,"note":"直接父级评论；顶层为空","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"root_id","type":"uuid","schema":{"name":"root_id","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":105,"collection":"comments","field":"root_id","special":null,"interface":"select-dropdown-m2o","options":{"template":"{{body}}"},"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":12,"width":"full","translations":null,"note":"所属顶层评论；顶层写自己","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"depth","type":"integer","schema":{"name":"depth","table":"comments","data_type":"integer","default_value":1,"generation_expression":null,"max_length":null,"numeric_precision":32,"numeric_scale":0,"is_generated":false,"is_nullable":false,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":106,"collection":"comments","field":"depth","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":13,"width":"full","translations":null,"note":"评论层级深度；顶层=1","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"replies_count","type":"integer","schema":{"name":"replies_count","table":"comments","data_type":"integer","default_value":0,"generation_expression":null,"max_length":null,"numeric_precision":32,"numeric_scale":0,"is_generated":false,"is_nullable":false,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":116,"collection":"comments","field":"replies_count","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":23,"width":"full","translations":null,"note":"直接子评论数量","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"last_reply_at","type":"timestamp","schema":{"name":"last_reply_at","table":"comments","data_type":"timestamp with time zone","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":117,"collection":"comments","field":"last_reply_at","special":null,"interface":"datetime","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":24,"width":"full","translations":null,"note":"最近子评论时间","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"like_count","type":"integer","schema":{"name":"like_count","table":"comments","data_type":"integer","default_value":0,"generation_expression":null,"max_length":null,"numeric_precision":32,"numeric_scale":0,"is_generated":false,"is_nullable":false,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":118,"collection":"comments","field":"like_count","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":25,"width":"full","translations":null,"note":"点赞数","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"unlike_count","type":"integer","schema":{"name":"unlike_count","table":"comments","data_type":"integer","default_value":0,"generation_expression":null,"max_length":null,"numeric_precision":32,"numeric_scale":0,"is_generated":false,"is_nullable":false,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":119,"collection":"comments","field":"unlike_count","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":26,"width":"full","translations":null,"note":"点踩数","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"status","type":"string","schema":{"name":"status","table":"comments","data_type":"character varying","default_value":"''published''","generation_expression":null,"max_length":255,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":false,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":120,"collection":"comments","field":"status","special":null,"interface":"select-dropdown","options":{"choices":[{"text":"已发布","value":"published"},{"text":"待审核","value":"pending"},{"text":"已隐藏","value":"hidden"},{"text":"已删除","value":"deleted"}]},"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":27,"width":"full","translations":null,"note":"评论状态","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"deleted_at","type":"timestamp","schema":{"name":"deleted_at","table":"comments","data_type":"timestamp with time zone","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":121,"collection":"comments","field":"deleted_at","special":null,"interface":"datetime","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":28,"width":"full","translations":null,"note":"软删除时间","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"target_collection","type":"string","schema":{"name":"target_collection","table":"comments","data_type":"character varying","default_value":null,"generation_expression":null,"max_length":255,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":122,"collection":"comments","field":"target_collection","special":null,"interface":"select-dropdown","options":{"choices":[{"text":"posts","value":"posts"},{"text":"notices","value":"notices"},{"text":"issues","value":"issues"},{"text":"issue_nodes","value":"issue_nodes"}]},"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":29,"width":"full","translations":null,"note":"被评论的目标集合（多态指针）","conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"text","type":"text","schema":{"name":"text","table":"comments","data_type":"text","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":123,"collection":"comments","field":"text","special":null,"interface":"input","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":30,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"date_created","type":"timestamp","schema":{"name":"date_created","table":"comments","data_type":"timestamp with time zone","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":137,"collection":"comments","field":"date_created","special":["date-created"],"interface":"datetime","options":null,"display":null,"display_options":null,"readonly":true,"hidden":true,"sort":100,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"date_updated","type":"timestamp","schema":{"name":"date_updated","table":"comments","data_type":"timestamp with time zone","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":138,"collection":"comments","field":"date_updated","special":["date-updated"],"interface":"datetime","options":null,"display":null,"display_options":null,"readonly":true,"hidden":true,"sort":101,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"user_created","type":"uuid","schema":{"name":"user_created","table":"comments","data_type":"uuid","default_value":null,"generation_expression":null,"max_length":null,"numeric_precision":null,"numeric_scale":null,"is_generated":false,"is_nullable":true,"is_unique":false,"is_indexed":false,"is_primary_key":false,"has_auto_increment":false,"foreign_key_schema":null,"foreign_key_table":null,"foreign_key_column":null,"comment":null},"meta":{"id":139,"collection":"comments","field":"user_created","special":["user-created"],"interface":null,"options":null,"display":null,"display_options":null,"readonly":true,"hidden":true,"sort":102,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"attachments","type":"alias","schema":null,"meta":{"id":141,"collection":"comments","field":"attachments","special":["files"],"interface":"files","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":103,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}},{"collection":"comments","field":"reactions","type":"alias","schema":null,"meta":{"id":145,"collection":"comments","field":"reactions","special":["o2m"],"interface":"list-o2m","options":null,"display":null,"display_options":null,"readonly":false,"hidden":false,"sort":104,"width":"full","translations":null,"note":null,"conditions":null,"required":false,"group":null,"validation":null,"validation_message":null}}]}%


❯ curl -H "Authorization: Bearer hm945LuZqtC9legpJsIc085ymelM6TTo" \
  "http://localhost:8055/operations" \
  -G \
  --data-urlencode "filter[flow][_eq]=226d24d9-1258-48d3-a4de-8a3f2ad0558b"
{"data":[{"id":"1847b250-00ef-4d1a-9318-8d501a345993","name":"Compute child metadata","key":"compute_child_metadata","type":"exec","position_x":55,"position_y":19,"options":{"code":"module.exports = async function({ data }) {\n  const parentResult = data?.fetch_parent?.data || data?.fetch_parent || [];\n  const parent = Array.isArray(parentResult) ? parentResult[0] : parentResult;\n  if (!parent) {\n    const error = new Error('Parent comment not found');\n    error.status = 400;\n    throw error;\n  }\n  const depth = (parent.depth || 1) + 1;\n  const rootId = parent.root_id || parent.id;\n  const parentReplies = parent.replies_count || 0;\n  const newReplies = parentReplies + 1;\n  const parentId = parent.id;\n  const now = new Date().toISOString();\n  return { depth, rootId, parentId, newReplies, parentReplies, lastReplyAt: now };\n};"},"resolve":"32e1cd7f-279d-480a-96d3-b8a396ae48ef","reject":null,"flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T03:58:30.137Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"},{"id":"32e1cd7f-279d-480a-96d3-b8a396ae48ef","name":"Update child depth/root","key":"update_child_comment","type":"item-update","position_x":73,"position_y":19,"options":{"collection":"comments","keys":["{{$trigger.key}}"],"payload":{"root_id":"{{ compute_child_metadata.rootId }}","depth":"{{ compute_child_metadata.depth }}"},"emitEvents":false},"resolve":"50a3e828-7436-4bdd-9f81-e18962cd6b78","reject":null,"flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T04:00:04.226Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"},{"id":"50a3e828-7436-4bdd-9f81-e18962cd6b78","name":"Update parent counters","key":"update_parent_comment","type":"item-update","position_x":91,"position_y":19,"options":{"collection":"comments","keys":["{{ compute_child_metadata.parentId }}"],"payload":{"replies_count":"{{ compute_child_metadata.newReplies }}","last_reply_at":"{{ compute_child_metadata.lastReplyAt }}"},"emitEvents":false},"resolve":null,"reject":null,"flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T04:00:41.966Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"},{"id":"63dba79f-2600-4945-a340-cd9fc9192883","name":"Check top level","key":"is_top_level","type":"condition","position_x":19,"position_y":1,"options":{"filter":{"$trigger":{"payload":{"parent_comment_id":{"_null":true}}}}},"resolve":"bd5bbdf5-330d-42b7-98d6-89e13b42369d","reject":"711f9413-260f-4433-bea4-2eeab5960dcd","flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T03:54:51.105Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"},{"id":"711f9413-260f-4433-bea4-2eeab5960dcd","name":"Fetch parent","key":"fetch_parent","type":"item-read","position_x":37,"position_y":19,"options":{"collection":"comments","filter":{"id":{"_eq":"{{$trigger.payload.parent_id}}"}},"limit":1},"resolve":"1847b250-00ef-4d1a-9318-8d501a345993","reject":null,"flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T03:58:07.839Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"},{"id":"bd5bbdf5-330d-42b7-98d6-89e13b42369d","name":"Set root to self","key":"set_root_self","type":"item-update","position_x":37,"position_y":1,"options":{"collection":"comments","keys":["{{$trigger.key}}"],"payload":{"root_id":"{{$trigger.key}}","depth":1},"emitEvents":false},"resolve":null,"reject":null,"flow":"226d24d9-1258-48d3-a4de-8a3f2ad0558b","date_created":"2025-09-20T03:54:58.606Z","user_created":"52d12f96-4c2f-4d19-8445-9ba2ed36ef43"}]}%


