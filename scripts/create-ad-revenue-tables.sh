#!/bin/bash

# ÂàõÂª∫ÂπøÂëäÊî∂ÁõäÁõ∏ÂÖ≥Ë°®
# Êó•ÊúüÔºö2025-10-20
# ËØ¥ÊòéÔºöÂåÖÂê´ ad_spots, ad_contracts, ad_details

set -e  # ÈÅáÂà∞ÈîôËØØÁ´ãÂç≥ÈÄÄÂá∫

DIRECTUS_URL="${DIRECTUS_URL:-http://localhost:8055}"
DIRECTUS_TOKEN="${DIRECTUS_TOKEN:-sfXUxkm3bEwOKO8fDKrZoClDQ4N08D0n}"

echo "=========================================="
echo "ÂàõÂª∫ÂπøÂëäÊî∂ÁõäÁõ∏ÂÖ≥Ë°®"
echo "=========================================="
echo ""
echo "üìç Directus URL: $DIRECTUS_URL"
echo ""
echo "Â∞ÜÂàõÂª∫‰ª•‰∏ãË°®Ôºö"
echo "  1. ad_spots (ÂπøÂëä‰Ωç‰∏ªÊï∞ÊçÆË°®)"
echo "  2. ad_contracts (ÂπøÂëäÂêàÂêåË°®)"
echo "  3. ad_details (ÂπøÂëäÊî∂ÁõäËØ¶ÊÉÖË°®)"
echo ""
read -p "ÊòØÂê¶ÁªßÁª≠Ôºü(yes/no): " confirm

if [ "$confirm" != "yes" ]; then
  echo "‚ùå Êìç‰ΩúÂ∑≤ÂèñÊ∂à"
  exit 1
fi

echo ""
echo "=========================================="
echo "Á¨¨1Ê≠•ÔºöÂàõÂª∫ad_spotsË°®ÔºàÂπøÂëä‰Ωç‰∏ªÊï∞ÊçÆË°®Ôºâ"
echo "=========================================="

echo "‚û°Ô∏è  ÂàõÂª∫ad_spotsÈõÜÂêà..."
curl -s -X POST "$DIRECTUS_URL/collections" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_spots",
    "meta": {
      "collection": "ad_spots",
      "icon": "ad_units",
      "note": "ÂπøÂëä‰Ωç‰∏ªÊï∞ÊçÆË°® - ÊâÄÊúâÂπøÂëä‰ΩçÁöÑÊ°£Ê°à",
      "display_template": "{{spot_code}} - {{location}}",
      "hidden": false,
      "singleton": false,
      "archive_field": "date_deleted",
      "archive_app_filter": true,
      "accountability": "all",
      "collapse": "open"
    },
    "schema": {
      "name": "ad_spots"
    },
    "fields": [
      {
        "field": "id",
        "type": "uuid",
        "schema": {
          "is_primary_key": true,
          "is_nullable": false
        },
        "meta": {
          "interface": "input",
          "readonly": true,
          "hidden": true,
          "special": ["uuid"]
        }
      }
    ]
  }' > /dev/null 2>&1 && echo "‚úÖ ad_spotsÈõÜÂêàÂ∑≤ÂàõÂª∫" || echo "‚ö†Ô∏è  ad_spotsÈõÜÂêàÂèØËÉΩÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: community_id"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "community_id",
    "type": "uuid",
    "schema": {
      "is_nullable": false,
      "foreign_key_table": "communities",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÊâÄÂ±ûÂ∞èÂå∫",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ community_id" || echo "‚ö†Ô∏è  community_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: spot_code"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "spot_code",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "max_length": 50
    },
    "meta": {
      "interface": "input",
      "note": "ÂπøÂëä‰ΩçÁºñÂè∑ÔºåÂ¶Ç AD-1-1-ELEVATOR",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ spot_code" || echo "‚ö†Ô∏è  spot_codeÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: spot_type"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "spot_type",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "max_length": 20
    },
    "meta": {
      "interface": "select-dropdown",
      "note": "ÂπøÂëä‰ΩçÁ±ªÂûã",
      "options": {
        "choices": [
          {"text": "ÁîµÊ¢ØÂπøÂëä", "value": "elevator"},
          {"text": "Èó∏Êú∫ÂπøÂëä", "value": "gate"}
        ]
      },
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ spot_type" || echo "‚ö†Ô∏è  spot_typeÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: location"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "location",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "max_length": 100
    },
    "meta": {
      "interface": "input",
      "note": "‰ΩçÁΩÆÊèèËø∞ÔºåÂ¶Ç 1Âè∑Ê•º1ÂçïÂÖÉÁîµÊ¢Ø",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ location" || echo "‚ö†Ô∏è  locationÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: floor (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "floor",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "max_length": 20
    },
    "meta": {
      "interface": "input",
      "note": "Ê•ºÂ±ÇÔºà‰ªÖÁîµÊ¢ØÂπøÂëäÔºâÔºåÂ¶Ç 1-18Â±Ç",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ floor" || echo "‚ö†Ô∏è  floorÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: size_spec (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "size_spec",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "max_length": 50
    },
    "meta": {
      "interface": "input",
      "note": "Â∞∫ÂØ∏ËßÑÊ†ºÔºåÂ¶Ç 60cm√ó90cm",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ size_spec" || echo "‚ö†Ô∏è  size_specÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: base_price_monthly"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "base_price_monthly",
    "type": "decimal",
    "schema": {
      "is_nullable": false,
      "numeric_precision": 10,
      "numeric_scale": 2
    },
    "meta": {
      "interface": "input",
      "note": "ÊúàÁßüÈáëÂèÇËÄÉ‰ª∑",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ base_price_monthly" || echo "‚ö†Ô∏è  base_price_monthlyÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: status"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "status",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "default_value": "available",
      "max_length": 20
    },
    "meta": {
      "interface": "select-dropdown",
      "note": "ÂπøÂëä‰ΩçÁä∂ÊÄÅ",
      "options": {
        "choices": [
          {"text": "Á©∫Èó≤ÂèØÂá∫Áßü", "value": "available"},
          {"text": "Â∑≤Âá∫Áßü", "value": "rented"},
          {"text": "Áª¥Êä§‰∏≠‰∏çÂèØÁî®", "value": "maintenance"}
        ]
      },
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ status" || echo "‚ö†Ô∏è  statusÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: current_contract_id (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "current_contract_id",
    "type": "uuid",
    "schema": {
      "is_nullable": true,
      "foreign_key_table": "ad_contracts",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂΩìÂâçÂêàÂêåID",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ current_contract_id" || echo "‚ö†Ô∏è  current_contract_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: notes (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_spots" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "notes",
    "type": "text",
    "schema": {
      "is_nullable": true
    },
    "meta": {
      "interface": "input-multiline",
      "note": "Â§áÊ≥®‰ø°ÊÅØ",
      "width": "full"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ notes" || echo "‚ö†Ô∏è  notesÂ∑≤Â≠òÂú®"

echo ""
echo "=========================================="
echo "Á¨¨2Ê≠•ÔºöÂàõÂª∫ad_contractsË°®ÔºàÂπøÂëäÂêàÂêåË°®Ôºâ"
echo "=========================================="

echo "‚û°Ô∏è  ÂàõÂª∫ad_contractsÈõÜÂêà..."
curl -s -X POST "$DIRECTUS_URL/collections" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_contracts",
    "meta": {
      "collection": "ad_contracts",
      "icon": "description",
      "note": "ÂπøÂëäÂêàÂêåË°® - ÊØèÊ¨°Á≠æÁ∫¶ÁöÑÂêàÂêåËÆ∞ÂΩï",
      "display_template": "{{contract_no}} - {{advertiser_name}}",
      "hidden": false,
      "singleton": false,
      "archive_field": "date_deleted",
      "archive_app_filter": true,
      "accountability": "all",
      "collapse": "open"
    },
    "schema": {
      "name": "ad_contracts"
    },
    "fields": [
      {
        "field": "id",
        "type": "uuid",
        "schema": {
          "is_primary_key": true,
          "is_nullable": false
        },
        "meta": {
          "interface": "input",
          "readonly": true,
          "hidden": true,
          "special": ["uuid"]
        }
      }
    ]
  }' > /dev/null 2>&1 && echo "‚úÖ ad_contractsÈõÜÂêàÂ∑≤ÂàõÂª∫" || echo "‚ö†Ô∏è  ad_contractsÈõÜÂêàÂèØËÉΩÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: community_id"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "community_id",
    "type": "uuid",
    "schema": {
      "is_nullable": false,
      "foreign_key_table": "communities",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÊâÄÂ±ûÂ∞èÂå∫",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ community_id" || echo "‚ö†Ô∏è  community_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: spot_id"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "spot_id",
    "type": "uuid",
    "schema": {
      "is_nullable": false,
      "foreign_key_table": "ad_spots",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂÖ≥ËÅîÂπøÂëä‰Ωç",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ spot_id" || echo "‚ö†Ô∏è  spot_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: contract_no (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "contract_no",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "max_length": 50
    },
    "meta": {
      "interface": "input",
      "note": "ÂêàÂêåÁºñÂè∑ÔºåÂ¶Ç AD-2025-001",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ contract_no" || echo "‚ö†Ô∏è  contract_noÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: advertiser_name"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "advertiser_name",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "max_length": 100
    },
    "meta": {
      "interface": "input",
      "note": "ÂπøÂëä‰∏ªÂßìÂêç/ËÅîÁ≥ª‰∫∫",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ advertiser_name" || echo "‚ö†Ô∏è  advertiser_nameÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: advertiser_company (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "advertiser_company",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "max_length": 200
    },
    "meta": {
      "interface": "input",
      "note": "ÂπøÂëäÂÖ¨Âè∏ÂêçÁß∞",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ advertiser_company" || echo "‚ö†Ô∏è  advertiser_companyÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: advertiser_phone"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "advertiser_phone",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "max_length": 20
    },
    "meta": {
      "interface": "input",
      "note": "ÂπøÂëä‰∏ªÁîµËØù",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ advertiser_phone" || echo "‚ö†Ô∏è  advertiser_phoneÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: advertiser_email (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "advertiser_email",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "max_length": 100
    },
    "meta": {
      "interface": "input",
      "note": "ÂπøÂëä‰∏ªÈÇÆÁÆ±",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ advertiser_email" || echo "‚ö†Ô∏è  advertiser_emailÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: contract_start"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "contract_start",
    "type": "date",
    "schema": {
      "is_nullable": false
    },
    "meta": {
      "interface": "datetime",
      "display": "date",
      "note": "ÂêàÂêåÂºÄÂßãÊó•Êúü",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ contract_start" || echo "‚ö†Ô∏è  contract_startÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: contract_end"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "contract_end",
    "type": "date",
    "schema": {
      "is_nullable": false
    },
    "meta": {
      "interface": "datetime",
      "display": "date",
      "note": "ÂêàÂêåÁªìÊùüÊó•Êúü",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ contract_end" || echo "‚ö†Ô∏è  contract_endÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: monthly_rent"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "monthly_rent",
    "type": "decimal",
    "schema": {
      "is_nullable": false,
      "numeric_precision": 10,
      "numeric_scale": 2
    },
    "meta": {
      "interface": "input",
      "note": "ÊúàÁßüÈáë",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ monthly_rent" || echo "‚ö†Ô∏è  monthly_rentÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: total_amount"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "total_amount",
    "type": "decimal",
    "schema": {
      "is_nullable": false,
      "numeric_precision": 10,
      "numeric_scale": 2
    },
    "meta": {
      "interface": "input",
      "note": "ÂêàÂêåÊÄªÈáëÈ¢ù",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ total_amount" || echo "‚ö†Ô∏è  total_amountÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: deposit"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "deposit",
    "type": "decimal",
    "schema": {
      "is_nullable": true,
      "default_value": 0,
      "numeric_precision": 10,
      "numeric_scale": 2
    },
    "meta": {
      "interface": "input",
      "note": "ÊäºÈáë",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ deposit" || echo "‚ö†Ô∏è  depositÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: deposit_status"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "deposit_status",
    "type": "string",
    "schema": {
      "is_nullable": true,
      "default_value": "none",
      "max_length": 20
    },
    "meta": {
      "interface": "select-dropdown",
      "note": "ÊäºÈáëÁä∂ÊÄÅ",
      "options": {
        "choices": [
          {"text": "Êó†ÊäºÈáë", "value": "none"},
          {"text": "ÊäºÈáëÂ∑≤Áº¥Á∫≥", "value": "paid"},
          {"text": "ÊäºÈáëÂ∑≤ÈÄÄËøò", "value": "refunded"}
        ]
      },
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ deposit_status" || echo "‚ö†Ô∏è  deposit_statusÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: status"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "status",
    "type": "string",
    "schema": {
      "is_nullable": false,
      "default_value": "active",
      "max_length": 20
    },
    "meta": {
      "interface": "select-dropdown",
      "note": "ÂêàÂêåÁä∂ÊÄÅ",
      "options": {
        "choices": [
          {"text": "ÂêàÂêåÊúâÊïàÊúüÂÜÖ", "value": "active"},
          {"text": "ÂêàÂêåÊ≠£Â∏∏Âà∞ÊúüÁªìÊùü", "value": "completed"},
          {"text": "ÂêàÂêåÊèêÂâçÁªàÊ≠¢", "value": "terminated"}
        ]
      },
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ status" || echo "‚ö†Ô∏è  statusÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: contract_files (json, nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "contract_files",
    "type": "json",
    "schema": {
      "is_nullable": true
    },
    "meta": {
      "interface": "input-code",
      "special": ["cast-json"],
      "note": "ÂêàÂêåÊñá‰ª∂IDÊï∞ÁªÑ",
      "options": {
        "language": "json",
        "template": "[]"
      },
      "width": "full"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ contract_files" || echo "‚ö†Ô∏è  contract_filesÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: notes (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_contracts" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "notes",
    "type": "text",
    "schema": {
      "is_nullable": true
    },
    "meta": {
      "interface": "input-multiline",
      "note": "Â§áÊ≥®",
      "width": "full"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ notes" || echo "‚ö†Ô∏è  notesÂ∑≤Â≠òÂú®"

echo ""
echo "=========================================="
echo "Á¨¨3Ê≠•ÔºöÂàõÂª∫ad_detailsË°®ÔºàÂπøÂëäÊî∂ÁõäËØ¶ÊÉÖË°®Ôºâ"
echo "=========================================="

echo "‚û°Ô∏è  ÂàõÂª∫ad_detailsÈõÜÂêà..."
curl -s -X POST "$DIRECTUS_URL/collections" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_details",
    "meta": {
      "collection": "ad_details",
      "icon": "link",
      "note": "ÂπøÂëäÊî∂ÁõäËØ¶ÊÉÖË°® - ËøûÊé•receivablesÂíåad_contracts",
      "hidden": false,
      "singleton": false,
      "accountability": "all",
      "collapse": "open"
    },
    "schema": {
      "name": "ad_details"
    },
    "fields": [
      {
        "field": "id",
        "type": "uuid",
        "schema": {
          "is_primary_key": true,
          "is_nullable": false
        },
        "meta": {
          "interface": "input",
          "readonly": true,
          "hidden": true,
          "special": ["uuid"]
        }
      }
    ]
  }' > /dev/null 2>&1 && echo "‚úÖ ad_detailsÈõÜÂêàÂ∑≤ÂàõÂª∫" || echo "‚ö†Ô∏è  ad_detailsÈõÜÂêàÂèØËÉΩÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: spot_id"
curl -s -X POST "$DIRECTUS_URL/fields/ad_details" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "spot_id",
    "type": "uuid",
    "schema": {
      "is_nullable": false,
      "foreign_key_table": "ad_spots",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂÖ≥ËÅîÂπøÂëä‰Ωç",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ spot_id" || echo "‚ö†Ô∏è  spot_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: contract_id"
curl -s -X POST "$DIRECTUS_URL/fields/ad_details" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "contract_id",
    "type": "uuid",
    "schema": {
      "is_nullable": false,
      "foreign_key_table": "ad_contracts",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂÖ≥ËÅîÂêàÂêå",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ contract_id" || echo "‚ö†Ô∏è  contract_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: receivable_id (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_details" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "receivable_id",
    "type": "uuid",
    "schema": {
      "is_nullable": true,
      "foreign_key_table": "receivables",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂÖ≥ËÅîÂ∫îÊî∂Ë¥¶Âçï",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ receivable_id" || echo "‚ö†Ô∏è  receivable_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  Ê∑ªÂä†Â≠óÊÆµ: payment_id (nullable)"
curl -s -X POST "$DIRECTUS_URL/fields/ad_details" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "field": "payment_id",
    "type": "uuid",
    "schema": {
      "is_nullable": true,
      "foreign_key_table": "payments",
      "foreign_key_column": "id"
    },
    "meta": {
      "interface": "select-dropdown-m2o",
      "special": ["m2o"],
      "note": "ÂÖ≥ËÅîÁº¥Ë¥πËÆ∞ÂΩï",
      "width": "half"
    }
  }' > /dev/null 2>&1 && echo "‚úÖ payment_id" || echo "‚ö†Ô∏è  payment_idÂ∑≤Â≠òÂú®"

echo ""
echo "=========================================="
echo "Á¨¨4Ê≠•ÔºöÂàõÂª∫Â§ñÈîÆÂÖ≥Á≥ª"
echo "=========================================="

echo "‚û°Ô∏è  ÂàõÂª∫ad_spots.community_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_spots",
    "field": "community_id",
    "related_collection": "communities"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_spots.community_id" || echo "‚ö†Ô∏è  ad_spots.community_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_spots.current_contract_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_spots",
    "field": "current_contract_id",
    "related_collection": "ad_contracts"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_spots.current_contract_id" || echo "‚ö†Ô∏è  ad_spots.current_contract_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_contracts.community_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_contracts",
    "field": "community_id",
    "related_collection": "communities"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_contracts.community_id" || echo "‚ö†Ô∏è  ad_contracts.community_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_contracts.spot_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_contracts",
    "field": "spot_id",
    "related_collection": "ad_spots"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_contracts.spot_id" || echo "‚ö†Ô∏è  ad_contracts.spot_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_details.spot_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_details",
    "field": "spot_id",
    "related_collection": "ad_spots"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_details.spot_id" || echo "‚ö†Ô∏è  ad_details.spot_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_details.contract_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_details",
    "field": "contract_id",
    "related_collection": "ad_contracts"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_details.contract_id" || echo "‚ö†Ô∏è  ad_details.contract_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_details.receivable_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_details",
    "field": "receivable_id",
    "related_collection": "receivables"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_details.receivable_id" || echo "‚ö†Ô∏è  ad_details.receivable_idÂ∑≤Â≠òÂú®"

echo "‚û°Ô∏è  ÂàõÂª∫ad_details.payment_idÂÖ≥Á≥ª..."
curl -s -X POST "$DIRECTUS_URL/relations" \
  -H "Authorization: Bearer $DIRECTUS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "collection": "ad_details",
    "field": "payment_id",
    "related_collection": "payments"
  }' > /dev/null 2>&1 && echo "‚úÖ ad_details.payment_id" || echo "‚ö†Ô∏è  ad_details.payment_idÂ∑≤Â≠òÂú®"

echo ""
echo "=========================================="
echo "‚úÖ ÂπøÂëäÊî∂ÁõäÁõ∏ÂÖ≥Ë°®ÂàõÂª∫ÂÆåÊàêÔºÅ"
echo "=========================================="
echo ""
echo "üìä Â∑≤ÂàõÂª∫ÁöÑË°®Ôºö"
echo "   1. ad_spots (10‰∏™Â≠óÊÆµ)"
echo "   2. ad_contracts (16‰∏™Â≠óÊÆµ)"
echo "   3. ad_details (4‰∏™Â≠óÊÆµ)"
echo ""
echo "üîó Directus Admin: $DIRECTUS_URL/admin"
echo ""
echo "üéâ ÊâÄÊúâÊî∂ÁõäÁÆ°ÁêÜË°®ÂàõÂª∫ÂÆåÊàêÔºÅ"
echo ""
echo "üìä Ë°®ÁªìÊûÑÊÄªËßàÔºö"
echo "   Ê†∏ÂøÉË°®Ôºö"
echo "     - receivables (Â∫îÊî∂Ê†∏ÂøÉË°®)"
echo "     - payments (ÂÆûÊî∂Ê†∏ÂøÉË°®)"
echo ""
echo "   ÂÅúËΩ¶Ë¥πÁõ∏ÂÖ≥Ôºö"
echo "     - parking_spots (ÂÅúËΩ¶‰Ωç‰∏ªÊï∞ÊçÆË°®)"
echo "     - parking_details (ÂÅúËΩ¶Ë¥πËØ¶ÊÉÖË°®)"
echo "     - parking_temp_records (‰∏¥ÂÅúË¥πËÆ∞ÂΩïË°®)"
echo ""
echo "   ÂπøÂëäÊî∂ÁõäÁõ∏ÂÖ≥Ôºö"
echo "     - ad_spots (ÂπøÂëä‰Ωç‰∏ªÊï∞ÊçÆË°®)"
echo "     - ad_contracts (ÂπøÂëäÂêàÂêåË°®)"
echo "     - ad_details (ÂπøÂëäÊî∂ÁõäËØ¶ÊÉÖË°®)"
echo ""
