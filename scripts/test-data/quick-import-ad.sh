#!/bin/bash

# å¿«é€Ÿå¯¼å…¥å¹¿å‘Šæ”¶ç›Šæ•°æ®
# ç”¨æ³•ï¼š./quick-import-ad.sh [local|remote]

set -e

ENV="${1:-local}"

echo "========================================"
echo "å¹¿å‘Šæ”¶ç›Šæ•°æ®å¿«é€Ÿå¯¼å…¥"
echo "========================================"
echo ""
echo "ç¯å¢ƒ: $ENV"
echo ""

# è¿›å…¥è„šæœ¬æ‰€åœ¨ç›®å½•
cd "$(dirname "$0")"

# 1. ç”Ÿæˆæ•°æ®
echo "æ­¥éª¤1: ç”Ÿæˆå¹¿å‘Šæ”¶ç›Šæµ‹è¯•æ•°æ®..."
echo "----------------------------------------"
node generate-ad-data.js "$ENV"
echo ""

# 2. å¯¼å…¥æ•°æ®
echo "æ­¥éª¤2: å¯¼å…¥å¹¿å‘Šæ”¶ç›Šæ•°æ®åˆ°Directus..."
echo "----------------------------------------"
node import-ad-data.js "$ENV"
echo ""

echo "========================================"
echo "âœ… å¹¿å‘Šæ”¶ç›Šæ•°æ®å¯¼å…¥å®Œæˆï¼"
echo "========================================"
echo ""

if [ "$ENV" = "local" ]; then
  echo "ğŸ”— æœ¬åœ°ç¯å¢ƒ: http://localhost:8055/admin"
else
  echo "ğŸ”— è¿œç¨‹ç¯å¢ƒ: https://www.betterhome.ink/admin"
fi

echo ""
